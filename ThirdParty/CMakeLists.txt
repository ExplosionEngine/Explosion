if (${CMAKE_SYSTEM_NAME} STREQUAL "Darwin")
    add_library(OpenGLDummy INTERFACE)
    add_library(opengl::opengl ALIAS OpenGLDummy)
endif ()

find_package(httplib REQUIRED GLOBAL)
find_package(glfw3 REQUIRED GLOBAL)
find_package(stb REQUIRED GLOBAL)
find_package(cityhash REQUIRED GLOBAL)
find_package(GTest REQUIRED GLOBAL)
find_package(Taskflow REQUIRED GLOBAL)
find_package(libclang REQUIRED GLOBAL)
find_package(assimp REQUIRED GLOBAL)
find_package(VulkanMemoryAllocator REQUIRED GLOBAL)
find_package(debugbreak REQUIRED GLOBAL)
find_package(rapidjson REQUIRED GLOBAL)
find_package(clipp REQUIRED GLOBAL)
find_package(dxc REQUIRED GLOBAL)
find_package(VulkanHeaders REQUIRED GLOBAL)
find_package(VulkanLoader REQUIRED GLOBAL)
find_package(VulkanValidationLayers REQUIRED GLOBAL)
find_package(spirv-cross REQUIRED GLOBAL)

if (${CMAKE_SYSTEM_NAME} STREQUAL "Windows")
    find_package(DirectX-Headers REQUIRED GLOBAL)
    set_target_properties(assimp::assimp PROPERTIES RUNTIME_DEP "${assimp_INCLUDE_DIR}/../bin/assimp-vc${MSVC_TOOLSET_VERSION}-mt.dll")
    set_target_properties(libclang::libclang PROPERTIES RUNTIME_DEP "${libclang_INCLUDE_DIR}/../bin/libclang.dll")
    set_target_properties(dxc::dxc PROPERTIES RUNTIME_DEP "${dxc_INCLUDE_DIR}/../bin/dxil.dll;${dxc_INCLUDE_DIR}/../bin/dxcompiler.dll")
    set_target_properties(vulkan-validationlayers::vulkan-validationlayers PROPERTIES RUNTIME_DEP "${VulkanValidationLayers_INCLUDE_DIR}/../bin/VkLayer_khronos_validation.dll;${VulkanValidationLayers_INCLUDE_DIR}/../bin/VkLayer_khronos_validation.json")
elseif (${CMAKE_SYSTEM_NAME} STREQUAL "Darwin")
    find_package(MoltenVK REQUIRED GLOBAL)
    set_target_properties(vulkan-validationlayers::vulkan-validationlayers PROPERTIES RUNTIME_DEP "${VulkanValidationLayers_INCLUDE_DIR}/../lib/libVkLayer_khronos_validation.dylib;${VulkanValidationLayers_INCLUDE_DIR}/../share/vulkan/explicit_layer.d/VkLayer_khronos_validation.json")
    set_target_properties(molten-vk::molten-vk PROPERTIES RUNTIME_DEP "${MoltenVK_INCLUDE_DIR}/../lib/libMoltenVK.dylib;${MoltenVK_INCLUDE_DIR}/../lib/MoltenVK_icd.json")
endif ()
